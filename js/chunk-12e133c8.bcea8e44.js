(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-12e133c8"],{"437b":function(t,e,s){},"4fde":function(t,e,s){"use strict";s("7ce0")},"7ce0":function(t,e,s){},a55b:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"login"}},[s("div",{staticClass:"login_img"},[s("van-image",{attrs:{round:"",width:"1.8rem",height:"1.8rem",src:"http://47.115.51.185/h5/img/logo2.47964cc3.png"}})],1),s("div",{staticClass:"kk"},[1==t.mode?s("van-tabs",{staticClass:"lgoin_form",model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[s("van-tab",{attrs:{title:"账号登录"}},[s("van-form",{attrs:{"show-error":"","show-error-message":!1,"validate-trigger":"onSubmit"},on:{submit:t.doLogin,failed:t.onFailed}},[s("van-field",{attrs:{name:"account","left-icon":"user-o",placeholder:"请输入账号",rules:[{required:!0,pattern:t.iphone,message:"请填写账号"}]},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),s("van-field",{attrs:{"left-icon":"lock",name:"password",type:"password",placeholder:"密码",rules:[{required:!0,pattern:t.code,message:"请填写密码"}]},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),s("div",{staticClass:"forgotYourPassword"},[s("p",{on:{click:function(e){t.mode=3}}},[s("i",{staticClass:"iconfont icon-wenhao"}),t._v("忘记密码 ")])]),s("div",{staticStyle:{margin:"16px"}},[s("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"}},[t._v("登录")])],1)],1)],1),s("van-tab",{attrs:{title:"快速登录"}},[s("van-form",{attrs:{"show-error":"","show-error-message":!1,"validate-trigger":"onSubmit"},on:{submit:t.logg,failed:t.onFailed}},[s("van-field",{attrs:{name:"phone","left-icon":"user-o",placeholder:"请输入手机号",rules:[{required:!0,pattern:t.iphone,message:"请填写手机号"}]},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}}),s("van-field",{attrs:{"left-icon":"lock",name:"captcha",type:"text",placeholder:"请填入验证码",rules:[{required:!0,message:"请填写验证码"}]},scopedSlots:t._u([{key:"button",fn:function(){return[s("van-button",{style:{background:t.sendFlag?"gray":"linear-gradient(to bottom, #ff4b1f, #ff9068)"},attrs:{disabled:t.sendFlag,size:"small",type:"primary",round:"",block:"","native-type":"button"},on:{click:function(e){return t.send(t.phone,1)}}},[[s("span",{class:{zIn:t.sendFlag}},[t._v("发送验证码")])],[s("span",{staticClass:"btn-span",class:{zIn2:!t.sendFlag}},[t._v(t._s(t.num)+"s")])]],2)]},proxy:!0}],null,!1,1088216593),model:{value:t.captcha,callback:function(e){t.captcha=e},expression:"captcha"}}),s("div",{staticStyle:{margin:"16px"}},[s("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"}},[t._v("登录")])],1)],1)],1)],1):t._e(),1!=t.mode?s("div",{staticClass:"signUp"},[s("form",[s("h3",[t._v(t._s(2==t.mode?"注册账号":"忘记密码"))]),s("div",{staticClass:"sigUp_item"},[s("div",{staticClass:"sigUp_ico iconfont icon-shouji"}),s("div",{staticClass:"sigUp_input"},[2==t.mode?s("input",{directives:[{name:"model",rawName:"v-model",value:t.sjs,expression:"sjs"}],attrs:{type:"text",placeholder:"输入手机号码"},domProps:{value:t.sjs},on:{input:function(e){e.target.composing||(t.sjs=e.target.value)}}}):t._e(),3==t.mode?s("input",{directives:[{name:"model",rawName:"v-model",value:t.zh_sjs,expression:"zh_sjs"}],attrs:{type:"text",placeholder:"输入手机号码"},domProps:{value:t.zh_sjs},on:{input:function(e){e.target.composing||(t.zh_sjs=e.target.value)}}}):t._e()])]),s("div",{staticClass:"sigUp_item"},[s("div",{staticClass:"sigUp_ico iconfont icon-iconset0114"}),s("div",{staticClass:"sigUp_input"},[2==t.mode?s("input",{directives:[{name:"model",rawName:"v-model",value:t.yzs,expression:"yzs"}],attrs:{type:"number",placeholder:"填写验证码"},domProps:{value:t.yzs},on:{input:function(e){e.target.composing||(t.yzs=e.target.value)}}}):t._e(),3==t.mode?s("input",{directives:[{name:"model",rawName:"v-model",value:t.zh_yzs,expression:"zh_yzs"}],attrs:{type:"number",placeholder:"填写验证码"},domProps:{value:t.zh_yzs},on:{input:function(e){e.target.composing||(t.zh_yzs=e.target.value)}}}):t._e(),2==t.mode?s("p",{class:t.yzmd?"acive":"",on:{click:function(e){return t.send(t.sjs,2)}}},[t.yzmd?s("span",[t._v(t._s(t.nums)+"s")]):s("span",[t._v("获取验证码")])]):t._e(),3==t.mode?s("p",{class:t.zh_f?"acive":"",on:{click:function(e){return t.send(t.zh_sjs,3)}}},[t.zh_f?s("span",[t._v(t._s(t.zh_num)+"s")]):s("span",[t._v("获取验证码")])]):t._e()])]),s("div",{staticClass:"sigUp_item"},[s("div",{staticClass:"sigUp_ico iconfont icon-mima"}),s("div",{staticClass:"sigUp_input"},[2==t.mode?s("input",{directives:[{name:"model",rawName:"v-model",value:t.mms,expression:"mms"}],attrs:{type:"password",placeholder:"请填写您的登录密码"},domProps:{value:t.mms},on:{input:function(e){e.target.composing||(t.mms=e.target.value)}}}):t._e(),3==t.mode?s("input",{directives:[{name:"model",rawName:"v-model",value:t.zh_mms,expression:"zh_mms"}],attrs:{type:"password",placeholder:"请填写您的登录密码"},domProps:{value:t.zh_mms},on:{input:function(e){e.target.composing||(t.zh_mms=e.target.value)}}}):t._e()])])]),2==t.mode?s("button",{on:{click:t.registerNow}},[t._v("立即注册")]):t._e(),3==t.mode?s("button",{on:{click:t.ack}},[t._v("确认")]):t._e()]):t._e(),1==t.mode||2==t.mode?s("p",{staticClass:"zc"},[t._v(" "+t._s(1==t.mode?"没":"已")+"有账号？"),1==t.mode?s("span",{on:{click:function(e){t.mode=2}}},[t._v("立即注册")]):s("span",{on:{click:function(e){t.mode=1}}},[t._v("立即登录")])]):t._e(),3==t.mode?s("p",{staticClass:"zh"},[s("span",{on:{click:function(e){t.mode=1}}},[t._v("立即登录")])]):t._e()],1)])},o=[],n=(s("b0c0"),{data:function(){return{active:0,list:["账号密码登录","手机快速登录"],username:"",password:"",iphone:/^1[3456789]\d{9}$/,code:/^(?=.*\d)(?=.*[a-zA-Z])[\da-zA-Z]{6,20}$/,phone:"",captcha:"",sendFlag:!1,num:60,key:null,mode:1,sjs:"",yzs:"",mms:"",yzmd:!1,nums:60,zh_yzs:"",zh_sjs:"",zh_num:60,zh_mms:"",zh_f:!1}},created:function(){var t=this;this.axios.get("/api/verify_code").then((function(e){t.key=e.data.data.key}))},methods:{doLogin:function(t){var e=this;this.$axios.post("api/login",t).then((function(t){if(200==t.data.status){var s=new Date(t.data.data.expires_time),a=s.getTime();e.$store.commit("setToken",t.data.data.token),e.$cookie.setCookie("token",t.data.data.token),e.$cookie.setCookie("time",a),e.$store.dispatch("getUser"),setTimeout((function(){e.$router.push("/mine")}),500)}else e.$toast("您的账号或密码输入有误，请再次核对")}))},logg:function(t){var e=this;this.axios.post("/api/login/mobile",t).then((function(t){if(200!=t.data.status)e.$toast("验证码错误，请先获取验证码");else{var s=new Date(t.data.data.expires_time),a=s.getTime();e.$store.commit("setToken",t.data.data.token),e.$cookie.setCookie("token",t.data.data.token),e.$cookie.setCookie("time",a),e.$store.dispatch("getUser"),e.$toast({type:"success",message:"登录成功"}),setTimeout((function(){e.$router.push("/mine")}),500)}}))},send:function(t,e){var s=this,a=1==e?"login":2==e?"register":"";if(/^1[3456789]\d{9}$/.test(t)){this.axios.post("api/register/verify",{key:this.key,phone:t,type:a}).then((function(t){console.log(t),200!=t.data.status?s.$toast(t.data.msg):s.$toast("验证码发送成功!请输入验证码!")})),2==e?this.yzmd=!0:1==e?this.sendFlag=!0:this.zh_f=!0;var o=setInterval((function(){2==e?s.nums--:1==e?s.num--:s.zh_num--;var t=2==e?s.nums:1==e?s.num:s.zh_num;t<=0&&(clearInterval(o),2==e?s.yzmd=!1:1==e?s.sendFlag=!1:s.zh_f=!1,2==e?s.nums=60:1==e?s.num=60:s.zh_num=60)}),1e3)}else this.$toast("手机号格式不正确")},onFailed:function(t){t.errors.length>1?this.$toast("您的账号和密码都输入有误，请再次核对"):"password"==t.errors[0].name?this.$toast("您的密码输入有误"):this.$toast("您的账号输入有误")},registerNow:function(){var t=this;return/^(?=.*\d)(?=.*[a-zA-Z])[\da-zA-Z]{6,20}$/.test(this.mms)?/^1[3456789]\d{9}$/.test(this.sjs)?""==this.yzs?(this.$toast("验证码不能为空"),!1):void this.axios.post("/api/register",{account:this.sjs,captcha:this.yzs,password:this.mms}).then((function(e){if(200!=e.data.status)t.$toast(e.data.msg);else{t.$toast({type:"success",message:e.data.msg}),t.mode=!0,t.active=1,t.num=t.nums,t.sendFlag=!0,t.phone=t.sjs,t.captcha=t.yzs;var s=setInterval((function(){t.num--,t.nums<0&&(t.sendFlag=!0,clearInterval(s))}),1e3)}})):(this.$toast("手机号输入有误"),!1):(this.$toast("密码需要6-20位，并且包含数字和字母"),!1)},ack:function(){var t=this;return/^(?=.*\d)(?=.*[a-zA-Z])[\da-zA-Z]{6,20}$/.test(this.zh_mms)?/^1[3456789]\d{9}$/.test(this.zh_sjs)?""==this.zh_yzs?(this.$toast("验证码不能为空"),!1):void this.axios.post("/api/register/reset",{account:this.zh_sjs,captcha:this.zh_yzs,code:"",password:this.zh_mms}).then((function(e){200!=e.data.status?t.$toast(e.data.msg):(t.$toast({type:"success",message:e.data.msg}),t.mode=1)})):(this.$toast("手机号输入有误"),!1):(this.$toast("密码需要6-20位，并且包含数字和字母"),!1)}}}),i=n,r=(s("4fde"),s("be91"),s("2877")),c=Object(r["a"])(i,a,o,!1,null,"ce797cda",null);e["default"]=c.exports},b0c0:function(t,e,s){var a=s("83ab"),o=s("9bf2").f,n=Function.prototype,i=n.toString,r=/^\s*function ([^ (]*)/,c="name";a&&!(c in n)&&o(n,c,{configurable:!0,get:function(){try{return i.call(this).match(r)[1]}catch(t){return""}}})},be91:function(t,e,s){"use strict";s("437b")}}]);
//# sourceMappingURL=chunk-12e133c8.bcea8e44.js.map