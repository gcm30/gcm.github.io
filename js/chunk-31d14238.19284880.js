(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-31d14238"],{"3ca7":function(t,i,e){"use strict";e("b0a4")},a15b:function(t,i,e){"use strict";var s=e("23e7"),a=e("44ad"),n=e("fc6a"),c=e("a640"),r=[].join,l=a!=Object,o=c("join",",");s({target:"Array",proto:!0,forced:l||!o},{join:function(t){return r.call(n(this),void 0===t?",":t)}})},b0a4:function(t,i,e){},b789:function(t,i,e){"use strict";e.r(i);var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{attrs:{id:"cart"}},[e("div",{staticClass:"cart_po"},[e("div",{staticClass:"cart_num"},[t.list.length?e("div",[e("p",[t._v(" 购物数量："),e("span",[t._v(t._s(t.num))])]),e("button",{on:{click:t.icr}},[t.gl?e("span",[t._v("管理")]):e("span",[t._v("取消")])])]):t._e()])]),t.list.length?e("div",{staticClass:"cart_list"},[e("van-checkbox-group",{ref:"checkboxGroup",attrs:{"checked-color":"#e93323"},model:{value:t.result,callback:function(i){t.result=i},expression:"result"}},t._l(t.list,(function(i,s){return e("div",{key:i.id,staticClass:"cart_list_item"},[e("div",{staticClass:"cart_list_item_l"},[e("van-checkbox",{attrs:{name:s}})],1),e("div",{staticClass:"cart_list_item_c",on:{click:function(e){return t.tzs(i)}}},[e("img",{attrs:{src:i.productInfo.image}})]),e("div",{staticClass:"cart_list_item_r"},[e("div",{staticClass:"van-ellipsis"},[t._v(t._s(i.productInfo.store_name))]),e("p",[t._v("属性："+t._s(i.productInfo.attrInfo.suk))]),e("div",[e("span",[t._v("￥"+t._s(i.truePrice))]),e("div",[e("van-stepper",{attrs:{min:"1",max:i.trueStock,"input-width":"1.4rem","button-size":"0.58rem"},model:{value:t.value[s],callback:function(i){t.$set(t.value,s,i)},expression:"value[index]"}})],1)])])])})),0)],1):t._e(),t.invalid.length?e("div",{staticClass:"invalid"},[e("div",{staticClass:"invalid_t"},[e("van-collapse",{model:{value:t.activeNames,callback:function(i){t.activeNames=i},expression:"activeNames"}},[e("van-collapse-item",{ref:"item",attrs:{name:"1"},scopedSlots:t._u([{key:"title",fn:function(){return[e("div",{staticClass:"clear",on:{click:t.change}},[e("p",{on:{click:t.dels}},[e("i",{staticClass:"iconfont icon-shanchu"}),t._v("清空")])])]},proxy:!0},{key:"right-icon",fn:function(){return[e("p",[e("van-icon",{attrs:{name:"arrow"}}),t._v("失效商品")],1)]},proxy:!0}],null,!1,3363583208)},[e("div",{staticClass:"lnvalid_goods"})])],1)],1)]):t._e(),t.list.length?e("div",{staticClass:"footer"},[e("div",{staticClass:"footer_l"},[e("van-checkbox",{attrs:{"checked-color":"#e93323"},on:{click:t.gg},model:{value:t.checkeds,callback:function(i){t.checkeds=i},expression:"checkeds"}},[t._v("全选"),t.result.length?e("span",[t._v("（"+t._s(t.nums)+"）")]):t._e()])],1),t.gl?e("div",{staticClass:"footer_r"},[e("span",{staticClass:"total_price"},[t._v("￥"),t.result.length?e("span",[t._v(t._s(t.totalPrice))]):t._e(),t.result.length?t._e():e("span",[t._v("0")])]),e("div",{staticClass:"orders",on:{click:t.xd}},[t._v("立即下单")])]):e("div",{staticClass:"footer_r"},[e("div",{staticClass:"btn_item sc",on:{click:t.collect}},[t._v("收藏")]),e("div",{staticClass:"btn_item dels",on:{click:t.erase}},[t._v("删除")])])]):t._e(),t.list.length?t._e():e("div",{staticClass:"cart_referral"},[t._m(0),e("div",{staticClass:"cart_tj"})]),t.flag?e("van-loading",{attrs:{size:"64px",vertical:""}},[t._v("加载中...")]):t._e()],1)},a=[function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"cart_none"},[e("img",{attrs:{src:"http://47.115.51.185/h5/img/noCart.6f2abfef.png"}})])}],n=(e("d81d"),e("a15b"),{components:{},data:function(){return{num:0,list:[],invalid:[],referralArr:[],result:[],checked:!0,activeNames:["1"],checkeds:!1,value:[],gl:!0,flag:!0}},created:function(){this.init()},mounted:function(){var t=this;this.checked&&this.$nextTick((function(){t.$refs.checkboxGroup&&t.$refs.checkboxGroup.toggleAll(!0)}))},methods:{change:function(){var t=this.$refs.item;t.toggle()},dels:function(){},gg:function(){this.checkeds?this.$refs.checkboxGroup.toggleAll(!0):this.$refs.checkboxGroup.toggleAll(!1)},xd:function(){var t=this,i=this.result.map((function(i){return t.list[i]})).map((function(t){return t.id}));this.$router.push("/order/submit/"+i.join(","))},icr:function(){var t=this.gl;this.gl=!t},collect:function(){var t=this,i=this.result.map((function(i){return t.list[i].productInfo.id}));this.axios.post("http://47.115.51.185/api/collect/all",{category:"product",id:i}).then((function(){t.$toast({type:"success",message:"收藏成功",duration:400})}))},erase:function(){var t=this;console.log("aa");var i=this.result.map((function(i){return t.list[i].id}));this.axios.post("http://47.115.51.185/api/cart/del",{ids:i}).then((function(){t.init()}))},tzs:function(t){var i=t.product_id;this.$router.push("/detail/".concat(i))},init:function(){var t=this;this.flag=!0,this.axios("http://47.115.51.185/api/cart/count").then((function(i){console.log(i),t.num=i.data.data.count})),this.axios.get("http://47.115.51.185/api/cart/list").then((function(i){console.log("购物车商品列表==>",i.data.data);var e=i.data.data;t.list=e.valid,t.value=t.list.map((function(t){return t.cart_num})),t.invalid=e.invalid})),this.axios.get("http://47.115.51.185/api/product/hot?page=1&limit=20").then((function(i){t.referralArr=i.data.data,t.flag=!1,console.log(t.referralArr)}))}},watch:{result:function(t){t.length==this.list.length?this.checkeds=!0:this.checkeds=!1}},computed:{totalPrice:function(){var t=this;return this.result.map((function(i){return t.list[i].truePrice*t.value[i]})).reduce((function(t,i){return t+i}))},nums:function(){var t=this;return this.result.map((function(i){return t.value[i]})).reduce((function(t,i){return t+i}))}}}),c=n,r=(e("3ca7"),e("2877")),l=Object(r["a"])(c,s,a,!1,null,null,null);i["default"]=l.exports},d81d:function(t,i,e){"use strict";var s=e("23e7"),a=e("b727").map,n=e("1dde"),c=n("map");s({target:"Array",proto:!0,forced:!c},{map:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-31d14238.19284880.js.map