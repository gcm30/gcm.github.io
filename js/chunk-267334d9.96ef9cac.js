(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-267334d9"],{"018c":function(t,i,e){"use strict";e("3f23")},"197c":function(t,i,e){},"26c2":function(t,i,e){"use strict";e("ac53")},"350c":function(t,i,e){},"3f23":function(t,i,e){},"426d":function(t,i,e){},"6ee6":function(t,i,e){"use strict";e("426d")},ac53:function(t,i,e){},bb3c:function(t,i,e){},c338:function(t,i,e){"use strict";e("197c")},cf2a:function(t,i,e){"use strict";e.r(i);var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return t.ord?e("div",{attrs:{id:"order"}},[e("div",{staticClass:"order_top"},[e("div",{staticClass:"order_t"},[e("div",{staticClass:"order_t_l"},[e("h2",[t._v("订单信息")]),e("p",[t._v(" 累计订单："),e("span",[t._v(t._s(t.ord.order_count))]),t._v("总消费：￥"),e("span",[t._v(t._s(t.ord.sum_price))])])]),e("div",{staticClass:"order_t_r"},[e("van-image",{attrs:{src:"http://47.115.51.185/h5/img/orderTime.e95f9090.png",fit:"cover"}})],1)])]),e("div",[e("div",{staticClass:"order_icr"},t._l(t.title,(function(i,s){return e("div",{key:s,staticClass:"order_item",class:t.active==s?"on":"",on:{click:function(i){t.active=s}}},[e("p",[t._v(t._s(i))]),e("p",[t._v(t._s(t.ord[t.titles[s]]))])])})),0),t.orderList.length?e("div",{staticClass:"order_content"},[e(t.type,{tag:"component",attrs:{orderList:t.orderList},on:{update:t.update}})],1):e("OrderNone"),t.flag?e("van-loading",{attrs:{color:"#7F7F7F",type:"spinner",vertical:""}},[t._v("正在加载")]):t._e()],1)]):t._e()},n=[],a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"obligation"},t._l(t.orderList,(function(i){return e("div",{key:i.id,staticClass:"obligationList"},[e("ObligationPsd",{attrs:{item:i,ids:"0"},on:{cancel:t.cancel}})],1)})),0)},o=[],r=function(){var t=this,i=t.$createElement,e=t._self._c||i;return t.item?e("div",{staticClass:"obligationPsd"},[e("div",{staticClass:"add_time"},[e("span",{staticClass:"time"},[t._v(t._s(t.item._add_time))]),e("span",{staticClass:"play_state"},[t._v(t._s(t.item._status._title))])]),e("div",{staticClass:"goodsInfo"},[e("div",{staticClass:"goodsInfo_t"},[e("div",{staticClass:"goodsInfo_t_l",on:{click:t.goods}},[e("img",{attrs:{src:t.item.cartInfo[0].productInfo.image}})]),e("div",{staticClass:"goodsInfo_t_r",on:{click:t.order}},[e("div",{staticClass:"goodsInfo_text van-multi-ellipsis--l2"},[t._v(" "+t._s(t.item.cartInfo[0].productInfo.store_name)+" ")]),e("div",{staticClass:"goodsInfo_price"},[e("p",[t._v("￥"+t._s(t.item.cartInfo[0].truePrice))]),e("p",[t._v("x"+t._s(t.item.total_num))])])])]),e("div",{staticClass:"goodsInfo_b"},[e("p",[t._v(" 共"+t._s(t.item.total_num)+t._s(t.item.cartInfo[0].productInfo.unit_name)+"商品，总金额"),e("span",[t._v("￥"+t._s(t.item.pay_price))])])])]),e("div",{staticClass:"os"},[0==t.state?e("div",{staticClass:"payment"},[e("button",{on:{click:t.cancelOrder}},[t._v("取消订单")]),e("button",{on:{click:t.payFor}},[t._v("立即付款")])]):t._e(),1==t.state?e("div",{staticClass:"overhang"},[e("button",{staticClass:"btn_red",on:{click:t.seeDetails}},[t._v("查看详情")])]):t._e()]),e("van-action-sheet",{attrs:{title:"选择付款方式"},model:{value:t.show,callback:function(i){t.show=i},expression:"show"}},[e("Pay",{attrs:{keys:t.item.order_id}})],1)],1):t._e()},c=[],d=e("d200"),l={components:{Pay:d["a"]},props:["item","ids"],data:function(){return{order_key:null,show:!1,goods_id:null,state:0}},created:function(){this.state=this.$route.params.id,this.order_key=this.item.order_id,this.goods_id=this.item.cartInfo[0].productInfo.id},methods:{cancelOrder:function(){var t=this;this.axios.post("/api/order/cancel",{id:this.order_key}).then((function(i){console.log(i),t.$emit("cancel")}))},payFor:function(){this.show=!0},goods:function(){this.$router.push("/detail/".concat(this.goods_id))},order:function(){this.$router.push("/order/detail/".concat(this.order_key))},seeDetails:function(){this.$router.push("/order/detail/".concat(this.item.order_id))}}},u=l,_=(e("fac5"),e("2877")),v=Object(_["a"])(u,r,c,!1,null,"70b17dae",null),f=v.exports,p={components:{ObligationPsd:f},props:["orderList"],data:function(){return{}},created:function(){},methods:{cancel:function(){this.$emit("update")}}},h=p,m=(e("018c"),Object(_["a"])(h,a,o,!1,null,"c6077eb0",null)),g=m.exports,b=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"borderNone"},[e("van-image",{attrs:{src:"http://47.115.51.185/h5/img/noOrder.90017ce2.png"}})],1)},y=[],C=(e("d8d0"),{}),k=Object(_["a"])(C,b,y,!1,null,"2041d5dd",null),w=k.exports,O=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"overhang"},t._l(t.orderList,(function(t){return e("div",{key:t.id,staticClass:"overhang_list"},[e("ObligationPsd",{attrs:{item:t,ids:"1"}})],1)})),0)},x=[],$={props:["orderList"],components:{ObligationPsd:f}},I=$,L=Object(_["a"])(I,O,x,!1,null,null,null),E=L.exports,P={components:{Obligations:g,OrderNone:w,overhang:E},data:function(){return{ord:null,active:0,title:["代付款","待发货","待收货","待评价","已完成"],titles:["unpaid_count","unshipped_count","received_count","evaluated_count","complete_count"],type:"Obligations",orderList:[],flag:!0,ids:0}},created:function(){this.active=this.$route.params.id,this.orderNum(),this.getOrderList(this.active)},watch:{active:function(t){switch(this.flag=!0,this.$router.push("/order/list/"+t),this.getOrderList(this.active),t){case 0:this.type="Obligations";break;case 1:this.type="overhang";break;case 2:break;case 3:break;case 4:break}},$route:function(t){this.active=t.params.id}},methods:{getOrderList:function(t){var i=this;this.axios.get("/api/order/list?page=1&limit=20&type="+t).then((function(t){i.orderList=t.data.data,i.flag=!1}))},orderNum:function(){var t=this;this.axios.get("/api/order/data").then((function(i){t.ord=i.data.data}))},update:function(){this.orderNum(),this.getOrderList(this.active)}}},j=P,N=(e("6ee6"),Object(_["a"])(j,s,n,!1,null,"b55dc04c",null));i["default"]=N.exports},d200:function(t,i,e){"use strict";var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{attrs:{id:"pay"}},[e("div",{staticClass:"weixin item",on:{click:function(i){return t.pay(1)}}},[t._m(0),t._m(1),e("div",[e("van-icon",{attrs:{name:"arrow"}})],1)]),e("div",{staticClass:"yue item",on:{click:function(i){return t.pay(2)}}},[t._m(2),e("div",[e("p",[t._v("余额支付")]),e("p",[t._v(" 当前可用余额："),e("span",[t._v(t._s(t.now_price))])])]),e("div",[e("van-icon",{attrs:{name:"arrow"}})],1)]),t.flag?e("van-loading",{attrs:{size:"54px",vertical:"","text-color":"#fff"}},[t._v("加载中...")]):t._e()],1)},n=[function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("i",{staticClass:"iconfont icon-weixinzhifu1"})])},function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("p",[t._v("微信支付")]),e("p",[t._v("使用微信快捷支付")])])},function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("i",{staticClass:"iconfont icon-chongzhijilu1"})])}],a=(e("d3b7"),e("ddb0"),{data:function(){return{now_price:null,flag:!1}},props:["keys"],created:function(){var t=this;this.axios.get("/api/userinfo").then((function(i){t.now_price=i.data.data.now_money}))},methods:{pay:function(t){var i=this;this.flag=!0;var e=1==t?"weixin":"yue";this.axios.post("/api/order/pay",{paytype:e,uni:this.keys}).then((function(t){i.flag=!1,i.$toast({duration:500,message:t.data.msg})}))}}}),o=a,r=(e("26c2"),e("c338"),e("2877")),c=Object(r["a"])(o,s,n,!1,null,"4dc5a1d8",null);i["a"]=c.exports},d8d0:function(t,i,e){"use strict";e("350c")},fac5:function(t,i,e){"use strict";e("bb3c")}}]);
//# sourceMappingURL=chunk-267334d9.96ef9cac.js.map